\chapter{Flexible Device Sharing in PCIe Clusters using Device~Lending}
\label{paper:SRMPDS}
\paperthumb

\begin{description}
	\item[Authors:]
		\textbf{Jonas Markussen}, Lars Bj{\o}rlykke Kristiansen, H{\aa}kon Kvale Stensland,
		Friedrich Seifert, Carsten Griwodz, P{\aa}l Halvorsen

	\item[Abstract:]
		Processing workloads may have very high \lgls{io}{IO} demands, exceeding the capabilities provided by resource
		virtualization and requiring direct access to the physical hardware.
		%
		For computers that are interconnected in \lgls{pcie}{PCI Express (PCIe)} networks, we have previously proposed 
		%
		Device Lending as a solution for assigning devices to remote hosts. In this paper, we
		explain how we have extended our implementation with support for the \lgls{kvm}{Linux Kernel-based Virtual
		Machine (KVM)} hypervisor.
		Using our extended Device Lending, it becomes possible to dynamically ``pass through'' physical remote devices
		to VM guests while still retaining the flexibility of virtualization, something that previously required
		extensive facilitation in both hypervisor and device drivers in the form of \gls{paravirtualization}.
		%
		We have also improved our original implementation with support for interoperability between remote devices.
		We show that it is possible to use multiple devices residing in different hosts, while still achieving the same
		bandwidth and latency as native \lgls{pcie}{PCIe}, and without requiring any additional support in device drivers. 


	\item[Candidate's contributions:]
		Markussen designed and implemented the \acrshort{mdev}/\acrshort{kvm} extension to the Device~Lending implementation from \cref{paper:NOSSDAV}, with input from Kristiansen.
		%
		Markussen also implemented the mechanism for facilitating \acrshort{p2p} between devices
		in different lenders.
		%
		Markussen identified the \acrshort{iommu} performance issues with the original Device~Lending implementation, and he and Kristiansen came up with a workaround for avoiding the \acrshort{iommu} in the data path. 
		%
		Markussen wrote most of the text, and he designed and performed all the experiments, including writing the necessary performance benchmarking programs.

	\item[Published in:]
		Proceedings of the 47th International Conference on Parallel Processing Companion~(ICPP'18) ---
		The 17th International Workshop on Scheduling and Resource Management for Parallel and Distributed Systems~(SRMPDS),
		August~2018, article~48, pp.~48:1--48:10.
		\doi{https://doi.org/10.1145/3229710.3229759}

	\item[Contributed to:]
		TODO

\end{description}
