\chapter{SmartIO}\label{chapter:smartio}

Unlike existing solutions for distributed \gls{io}, SmartIO seamlessly combines traditional \gls{io} with distributed shared-memory functionality, and is, therefore, able to provide sharing capabilities at multiple abstraction levels.
Devices may be distributed to physical hosts and to \glspl{vm} alike, and SmartIO also provides facilities for \glslink{disaggregation}{disaggregating} devices and memory resources in software.


However, as resources are accessed over native \gls{pcie}, they can be shared and used by remote machines without introducing a performance penalty.
%%
%Also unlike existing \gls{pcie}-based solutions, SmartIO is fully distributed and avoids dedicated servers.
%All machines in the cluster can contribute their own local resources and access remote resources, even at the same time.
%%
%Finally, by using \gls{pcie} shared memory techniques, SmartIO is able to abstract away the physical location of devices and memory resources. 
%Memory addresses are translated between different address domains by SmartIO in a manner that is transparent to application software, device drivers, and even the \gls{os}.
%This makes it possible to provide optimizations based on resource locality and minimizing data movement, without requiring the user to be aware of the underlying PCIe topology.
\section{General idea}\label{sec:idea}
\section{Architecture}\label{sec:overview}

\section{Implementation overview}\label{sec:impl}
\subsection{Device Lending}
\subsection{MDEV}
\subsection{API extension}

\section{NVMe driver}\label{sec:nvme}

%\section{Workload}\label{sec:eval}

\section{Performance measurements}\label{sec:eval}

\section{Related work}\label{sec:rw}
% RW first??
%An example of this is rCUDA, where multiple clients may run jobs on the same \gls{gpu} by relying ~\cite{Duato2010}
\Gls{rdma}-based \gls{disaggregation} can even allow a single resource to be shared by several machines in the cluster at the same time. 
%
However, since \gls{rdma} requires software to use specific programming models and semantics like message-passing, \gls{rdma}-based \gls{disaggregation} solutions are usually implemented as part of the application itself or as device-specific \gls{middleware}.
%
