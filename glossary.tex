
% Some basic computer related abbreviations not necessary to define for first use
\newacronym{bios}{BIOS}{Basic Input/Output System}
\glsunset{bios}

\newdualentry{io}{I/O}{input/output}
{Any interaction with a hardware device}
\glsunset{io}

\newacronym{ram}{RAM}{random access memory}

\newacronym{cpu}{CPU}{central processing unit}

\newacronym[plural={OSes}]{os}{OS}{operating system}

\newacronym{pci}{PCI}{Peripheral Component Interconnect}
\newacronym{pcie}{PCIe}{Peripheral Component Interconnect Express}


\newacronym{nvme}{NVMe}{non-volatile memory express storage device}
\newacronym{nvmeof}{NVMe-oF}{NVMe over Fabrics}
\newacronym{ssd}{SSD}{solid-state flash memory storage device}
\newacronym{gpu}{GPU}{graphics processing unit}
\newacronym{fpga}{FPGA}{field-programmable gate array}
\newacronym{nic}{NIC}{network interface card}
\newacronym{pf}{PF}{physical device function}
\newacronym{mriov}{MR-IOV}{Multi-Root I/O Virtualization}
\newacronym{api}{API}{application programming interface}
\newacronym{vm}{VM}{virtual machine}
\linkedgls{sisci}{sisciapi}{\glsxtrshort{sisci}~\glsxtrshort{api}}
\newacronym{fio}{FIO}{Flexible I/O tester}
\newacronym{sisci}{SISCI}{Software Infrastructure for Shared-Memory Cluster Interconnects}
\newacronym[seealso={passthrough}]{vfio}{VFIO}{Virtual Function I/O}
\newacronym{ats}{ATS}{Address Translation Services}

\newacronym{sq}{SQ}{submission queue}
\newacronym{cq}{CQ}{completion queue}

\newglossaryentry{dl}{
    name={Device~Lending},
    description={One of the sharing methods of SmartIO, allowing devices to be distributed to and shared with remote machines.}
}

\newdualentry[seealso={passthrough}]{mdev}{MDEV}{Mediated Device Driver}
{One of the sharing methods of SmartIO, allowing devices to be distributed and shared with remote \glsabbrlinkpl{vm}.}


\newglossaryentry{lut}{
    name={NTB look-up table},
    text={look-up table},
    description={Address translation table in an \glsabbrlink{pcie} \glsabbrlink{ntb}.},
    type=nolist
}

\newglossaryentry{mpi}{
    name={message-passing},
    text={message-passing},
    description={A standardized method of communication commonly used in parallel computing, including semantics for sending and receiving messages.},
}

\newglossaryentry{rpc}{
    name={remote procedure calls},
    description={A standardized method for passing messages and invoking software procedures on a remote system.},
}

\newglossaryentry{pgas}{
    name={partitioned global address space},
    description={A standardized parallel programming model for distributed, shared-memory.}
}


\newglossaryentry{db}{
    name={NVMe doorbell register},
    text={doorbell~register},
    description={TODO if relevant},
    type=nolist
}

\newglossaryentry{function}{
    name={PCIe device function},
    sort={device function},
    text={function},
    description={\glsabbrlink{pcie} devices may have one or more functions, each appearing to the system as individual devices with their own set of resources. Also known as a \glsabbrlink{pcie} endpoint.},
    seealso={gls-sriov},
}
\linkedgls{function}{ep}{endpoint}
\linkedgls{function}{devicefunction}{device~function}
\linkedgls{function}{pcieep}{\glsentryshort{pcie}~endpoint}

\newglossaryentry{cfgspace}{
    name={configuration space},
    sort={configuration space},
    description={A set of standard registers that is used to configure a \glsabbrlink{pcie} device, such as reserving \glsabbrlinkpl{bar} and interrupt addresses.},
    text={configuration space}
}
\linkedgls{cfgspace}{cfgcycle}{configuration cycle}

\newglossaryentry{shadowdev}{
    name={shadow device},
    description={The mechanism used by \glsabbrlink{dl} to intercept certain device interactions from a device driver.},
    seealso={dl}
}

\newglossaryentry{apiext}{
    name={\glsentryshort{api}~extension},
    description={One of the sharing methods of SmartIO, extending the \glshyperlink[SISCI~API]{sisci} with device-oriented functionality for writing device drivers as part of shared-memory cluster applications.},
}
\linkedgls{apiext}{sisciapiext}{\glsentryshort{sisci}~\glsentryshort{api}~extension}
\linkedgls{apiext}{exttosisciapi}{extension to the \glsentryshort{sisci}~\glsentryshort{api}}
\linkedgls{apiext}{ext}{extension}

\newdualentry[seealso={function}]{sriov}{SR-IOV}{Single-Root I/O Virtualization}
{Allows a single device to virtualize multiple device functions in hardware, each virtual function appearing to the system as a real device (function) with its own set of resources.}

\newdualentry{dma}{DMA}{direct memory access}
{Devices capable of direct memory access can access system memory and even \glsabbrlinkpl{bar} of other devices (\glshyperlink{p2p}).}

\newdualentry[seealso={gls-dma}]{rdma}{RDMA}{remote direct memory access}
{Using the network adapter to copy memory directly onto the network, without going through the \glsabbrlink{os} network stack, often used to implement middleware~services.}

\newdualentry{ntb}{NTB}{non-transparent bridge}
{A special \glsabbrlink{pcie} device that translates memory transactions between separate address spaces.}
\linkedgls{ntb}{pcientb}{\glsentryshort{pcie} \glsentryshort{ntb}}

\newdualentry[seealso={cfgspace}]{bar}{BAR}{Base Address Register}
{Registers in a device's configuration space containing the start addresses of the memory regions of a device. The term is often used synonymously for the device memory region the BAR register describes.}
\linkedgls{bar}{devicebar}{device~\glsentryshort{bar}}

\newglossaryentry{gpudirect}{
    name={GPUDirect},
    description={A feature of Nvidia \glsabbrlinkpl{gpu} that supports \glshyperlink{p2p} \glsabbrlink{dma} to \glsabbrlink{gpu} memory.},
    seealso={p2p}
}

\newglossaryentry{cuda}{
    name={CUDA},
    description={The parallel computing platform and \glsabbrlink{api} of Nvidia \glsabbrlinkpl{gpu} for general purpose processing.}
}

\newglossaryentry{p2p}{
    name={peer-to-peer DMA},
    sort={peer-to-peer},
    text={peer-to-peer},
    description={A \glsabbrlink{pcie} feature allowing two devices to directly transfer data between each other without going through system \glsabbrlink{ram}.},
    seealso={gls-dma}
}
\linkedgls{p2p}{p2pdma}{\glsentrytext{p2p}~\glsentryshort{dma}}
\linkedgls{p2p}{pciep2p}{\glsentryshort{pcie}~\glsentrytext{p2p}}

\newglossaryentry{disaggregation}{
	name={disaggregation},
	description={Dividing up a resource, such as memory or a device, into smaller components, and making them available to remote units.}
}
\linkedgls{disaggregation}{disaggregated}{disaggregated}
\linkedgls{disaggregation}{disaggregate}{disaggregate}
\linkedgls{disaggregation}{disaggregating}{disaggregating}

\newglossaryentry{kernelspace}{
    name={kernel space},
    description={Virtual memory and execution privileges suitable for \glsabbrlink{os} kernel and device drivers.}
}

\newglossaryentry{multicasting}{
    name={multicasting},
    sort={multicasting},
    description={A feature supported by some \glsabbrlink{pcie} switch chips that allow data coming in on one switch port to be replicated on multiple switch ports.},
    text={multicasting}
}
\linkedgls{multicasting}{pciemulticasting}{\gls{pcie}~multicasting}

\newglossaryentry{userspace}{
    name={user space},
    description={Virtual memory and execution privileges suitable for application software, in contrast to \glshyperlink[kernel space]{kernelspace}. Device drivers implemented in user space by-pass the kernel for improved performance, but sacrifices functionality that requires \glshyperlink[kernel space]{kernelspace} privileges.}
}

\newglossaryentry{passthrough}{
    name={pass-through},
    description={Allowing a physical hardware device to be accessed directly by a \glsabbrlink{vm} guest by using a system's \glsabbrlink{iommu} to map memory for the device.},
    seealso={hypervisor}
}
\linkedgls{passthrough}{vmpassthrough}{\glsentryshort{vm}~\glsentrytext{passthrough}}

\newglossaryentry{guest}{
    name={virtual machine guest},
    description={A computer system emulated in software.},
    text={guest\glsadd{vm}}
}
\linkedgls{guest}{vmguest}{\glsentryshort{vm}~guest}
\linkedgls{vm}{vminstance}{\glsentryshort{vm}~instance}
\linkedgls{guest}{guestos}{guest~\gls{os}}

\linkedgls{guest}{guestphys}{guest-physical}

\linkedgls{host}{hostphys}{host-physical}

\newglossaryentry{emulator}{
    name={virtual~machine emulator},
    text={emulator},
    description={The program that emulates a computer system,~i.e., the \glsentryshort{vm}.},
    seealso={guest}
}
\linkedgls{emulator}{vmemulator}{\glsentryshort{vm}~emulator}

\newglossaryentry{host}{
    name={virtual machine host},
    description={The physical machine running one or more \glsabbrlinkpl{vm}.},
    text={host},
    seealso={hypervisor}
}
\linkedgls{host}{hostmachine}{host~machine}
\linkedgls{host}{hosting}{hosting}

\newdualentry{mmio}{MMIO}{memory-mapped I/O}
{In \glsabbrlink{pcie}, device memory, such as registers, are mapped to the same address space as \glsabbrlink{ram}, allowing the \glsabbrlink{cpu} to read and write to this memory the same way it would access system~memory.}

\newglossaryentry{middleware}{
    name={middleware},
    description={A software service that provides facilitation beyond functionality available from the \glsabbrlink{os}, often implemented using \glsabbrlink{rdma}.}
}
\linkedgls{middleware}{middlewareservice}{middleware service}


\newglossaryentry{paravirtualization}{
	name={paravirtualization},
	description={A paravirtualized device relies on facilitation by the \glshyperlink{hypervisor} in order to use host resources.},
    seealso={hypervisor}
}

\newglossaryentry{hypervisor}{
	name={hypervisor},
	description={Kernel space software on a \glshyperlink[host~machine]{host}, assisting and facilitating a virtual machine emulator (such as Qemu) with \glsabbrlink{iommu} mappings.},
    seealso={gls-iommu}
}


\newdualentry{iommu}{IOMMU}{I/O Memory Management Unit}
{A unit embedded on the \glsabbrlink{cpu} that creates separate virtual address spaces for devices and prevents \glsabbrlink{dma} transactions outside these virtual address spaces.}


\newlinkedacronym[name={KVM}]{hypervisor}{kvm}{KVM~hypervisor}{Linux kernel-based virtual machine hypervisor}

\newlinkedacronym{gls-sriov}{vf}{VF}{virtual device function}

\newdualentry{msi}{MSI}{message-signaled interrupts}
{Interrupts in \glsabbrlink{pcie} are implemented as writes to a special memory address that is interpreted by the \glsabbrlink{cpu} to invoke the correct interrupt vector routine.}

%\newlinkedacronym{gls-msi}{msix}{MSI-X}{extended message-signaled interrupts}

\newglossaryentry{borrower}{
    name={borrower},
    seealso={lender},
    description={A computer system using a remote device with SmartIO.}
}
\linkedgls{borrower}{borrowermachine}{borrower~machine}

\newglossaryentry{lender}{
    name={lender},
    seealso={borrower},
    description={A computer system that has registered one or more of its internal devices with SmartIO and allowing it to be used by other machines.}
}
\linkedgls{lender}{lendermachine}{lender~machine}


\newglossaryentry{segment}{
    name={shared memory segment},
    description={A contiguous range of memory that may be mapped through an \glsabbrlink{ntb}. Segments can be allocated in \glsabbrlink{ram} or in device memory (\glsabbrlink{bar}).},
    text={segment}
}
\linkedgls{segment}{memorysegment}{memory~segment}
\linkedgls{segment}{sharedsegment}{shared memory segment}



\newglossaryentry{dmawindow}{
    name={DMA~window},
    description={A \glsglossarylink{segment} mapped for a device through the \glsglossarylink{lender}'s \glsabbrlink{ntb}, so that it may \glsabbrlink{dma} to it.},
    seealso={segment}
}

%\newglossaryentry{msiwindow}{
%    name={MSI~window},
%    description={An address range mapped for a device through the \glsglossarylink{lender}'s \glsabbrlink{ntb}, so that the device may trigger interrupt routines on the \glsglossarylink{borrower}'s \glsabbrlink{cpu}.},
%    seealso={segment}
%}

\newglossaryentry{hotadd}{
    name={hot-add},
    sort={hot-add},
    text={hot-add},
    description={A \glsabbrlink{pcie} feature where a device is added to the device tree of a running system, and after the bus enumeration process.}
}
\linkedgls{hotadd}{hotadded}{hot-added}
\linkedgls{hotadd}{hotadding}{hot-adding}
\linkedgls{hotadd}{hotadds}{hot-adds}

\newglossaryentry{trap}{
    name={trap},
    description={A hardware-assisted virtualization mechanism that makes it possible to invoke an interrupt routine with higher privileges. Also commonly known as a ``fault'' or ``exception''.}
}
\linkedgls{trap}{fault}{fault}


