% Some things have both an acronym and needs a glossary entry
\DeclareDocumentCommand{\newdualentry}{ O{} O{} m m m m }{
	\newglossaryentry{gls-#3}{
		name={#5},
		description={#6},#1
	}
	\makeglossaries
	\newglossaryentry{#3}{
		type=\acronymtype,
		name={#4},
		description={#5, \glsseeformat[Glossary:]{gls-#3}{}},
		first={#5~(#4)\glsadd{gls-#3}},
		text={#4\glsadd{gls-#3}},
		short={#4\glsadd{gls-#3}},#2
	}
}

% For the abstract of each paper, 
% we don't want to change the text but still want the link.
\newcommand{\lgls}[2]{%
\glslink{#1}{#2}\glsadd{#1}%
}

\makeglossaries

% Define a bunch of acronyms and abbreviations
\newacronym{rdma}{RDMA}{remote direct memory access}
\newacronym{cpu}{CPU}{central processing unit}
\newacronym[plural={OSes}]{os}{OS}{operating system}
\newacronym[firstplural={Non-Volatile Memory Express devices (NVMes)}]{nvme}{NVMe}{Non-Volatile Memory Express}
\newacronym{ssd}{SSD}{solid-state flash memory device}
\newacronym{gpu}{GPU}{graphics processing unit}
\newacronym{fpga}{FPGA}{field-programmable gate array}
\newacronym{nic}{NIC}{network interface card}
\newacronym{pf}{PF}{physical device function}
\newacronym{vf}{VF}{virtual device function}
\newacronym{pci}{PCI}{Peripheral Component Interconnect}
\newacronym{pcie}{PCIe}{Peripheral Component Interconnect Express}
\newacronym{mriov}{MR-IOV}{Multi-Root I/O Virtualization}
\newacronym{ram}{RAM}{random access memory}
\newacronym{api}{API}{application programming interface}
\newacronym{kvm}{KVM}{Linux kernel-based virtual machine hypervisor}
\newacronym{bios}{BIOS}{Basic Input/Output System}

\newacronym{mdev}{MDEV}{mediated device driver}
\newacronym{sisci}{SISCI}{Software Infrastructure Shared-Memory Cluster Interconnect}
\newacronym{fio}{FIO}{flexible I/O tester}


% Stuff with glossary entries
\newdualentry{sriov}{SR-IOV}{Single-Root I/O Virtualization}
{Allows a single device to virtualize multiple device functions in hardware}

\newdualentry{dma}{DMA}{direct memory access}
{Devices capable of direct memory access can access system memory and even memory regions of other devices}

\newglossaryentry{paravirtualization}{
	name={paravirtualization},
	description={A paravirtualized device relies on facilitation by the hypervisor in order to use host resources}
}

\newglossaryentry{hypervisor}{
	name={hypervisor},
	description={Software running in kernel space on the host, assisting and facilitating a virtual machine emulator (such as Qemu)}
}

\newdualentry[][firstplural={virtual machines~(VMs)}]{vm}{VM}{virtual machine}
{A computer system emulated in software}

%longplural={non-transparent bridges}
\newdualentry[][firstplural={non-transparent bridges~(NTBs)}]{ntb}{NTB}{non-transparent bridge}
{A special PCIe device that extends the PCIe bus out of a single computer and connecting several systems}

\newdualentry{bar}{BAR}{Base Address Register}
{The start address of a memory region of a device, used synonymously for the device memory region itself}

\newglossaryentry{p2p}{
    name={peer-to-peer},
    description={A \acrshort{pcie} feature allowing two devices to directly transfer data between each other without going through host \acrshort{ram}}
}

\newglossaryentry{io}{
	name={input/output},
	description={Any interaction with a hardware device, for example reading from a storage device},
	text={I/O}
}

\newglossaryentry{disaggregation}{
	name={disaggregation},
	description={Dividing up a resource, such as memory or a device, into smaller components, and making them available to remote units}
}

\newglossaryentry{kernel space}{
    name={kernel space},
    description={Virtual memory and execution privileges suitable for \acrshort{os} kernel and device drivers}
}

\newglossaryentry{userspace}{
    name={user space},
    description={Virtual memory and execution privileges suitable for application software, in contrast to kernel space}
}

\newglossaryentry{pass-through}{
    name={pass-through},
    description={Allowing a device to be accessed directly by a virtual machine by using a system's IOMMU to map memory for the device}
}

\newdualentry{iommu}{IOMMU}{I/O memory management unit}
{A unit creates separate virtual address spaces for devices and protects against rogue DMA transactions}